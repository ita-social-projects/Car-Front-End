{"version":3,"sources":["MaterialBottomTabView.tsx"],"names":["MaterialCommunityIcons","require","default","e","global","__expo","Icon","isErrorLogged","test","message","console","error","warn","name","MaterialBottomTabViewInner","state","navigation","descriptors","rest","dark","colors","buildLink","theme","React","useMemo","t","DarkTheme","DefaultTheme","surface","card","index","dispatch","TabActions","jumpTo","routes","target","key","route","render","Platform","OS","onPress","accessibilityRole","_0","borderless","_1","centered","_2","rippleColor","_3","style","params","metaKey","altKey","ctrlKey","shiftKey","button","preventDefault","styles","touchable","undefined","focused","color","options","tabBarIcon","icon","tabBarLabel","title","tabBarColor","tabBarBadge","tabBarAccessibilityLabel","tabBarTestID","event","emit","type","canPreventDefault","defaultPrevented","MaterialBottomTabView","props","StyleSheet","create","backgroundColor","display","justifyContent"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { StyleSheet, Platform } from 'react-native';\nimport { BottomNavigation, DefaultTheme, DarkTheme } from 'react-native-paper';\nimport {\n  NavigationHelpersContext,\n  Route,\n  TabNavigationState,\n  TabActions,\n  useTheme,\n  useLinkBuilder,\n  Link,\n  ParamListBase,\n} from '@react-navigation/native';\n\nimport type {\n  MaterialBottomTabDescriptorMap,\n  MaterialBottomTabNavigationConfig,\n  MaterialBottomTabNavigationHelpers,\n} from '../types';\n\ntype Props = MaterialBottomTabNavigationConfig & {\n  state: TabNavigationState<ParamListBase>;\n  navigation: MaterialBottomTabNavigationHelpers;\n  descriptors: MaterialBottomTabDescriptorMap;\n};\n\ntype Scene = { route: { key: string } };\n\n// Optionally require vector-icons referenced from react-native-paper:\n// https://github.com/callstack/react-native-paper/blob/4b26429c49053eaa4c3e0fae208639e01093fa87/src/components/MaterialCommunityIcon.tsx#L14\nlet MaterialCommunityIcons: any;\n\ntry {\n  // Optionally require vector-icons\n  MaterialCommunityIcons = require('react-native-vector-icons/MaterialCommunityIcons')\n    .default;\n} catch (e) {\n  // @ts-expect-error\n  if (global.__expo?.Icon?.MaterialCommunityIcons) {\n    // Snack doesn't properly bundle vector icons from sub-path\n    // Use icons from the __expo global if available\n    // @ts-expect-error\n    MaterialCommunityIcons = global.__expo.Icon.MaterialCommunityIcons;\n  } else {\n    let isErrorLogged = false;\n\n    // Fallback component for icons\n    MaterialCommunityIcons = () => {\n      if (!isErrorLogged) {\n        if (\n          !/(Cannot find module|Module not found|Cannot resolve module)/.test(\n            e.message\n          )\n        ) {\n          console.error(e);\n        }\n\n        console.warn(\n          `Tried to use the icon '${name}' in a component from '@react-navigation/material-bottom-tabs', but 'react-native-vector-icons' could not be loaded.`,\n          `To remove this warning, try installing 'react-native-vector-icons' or use another method.`\n        );\n\n        isErrorLogged = true;\n      }\n\n      return null;\n    };\n  }\n}\n\nfunction MaterialBottomTabViewInner({\n  state,\n  navigation,\n  descriptors,\n  ...rest\n}: Props) {\n  const { dark, colors } = useTheme();\n  const buildLink = useLinkBuilder();\n\n  const theme = React.useMemo(() => {\n    const t = dark ? DarkTheme : DefaultTheme;\n\n    return {\n      ...t,\n      colors: {\n        ...t.colors,\n        ...colors,\n        surface: colors.card,\n      },\n    };\n  }, [colors, dark]);\n\n  return (\n    <BottomNavigation\n      {...rest}\n      theme={theme}\n      navigationState={state}\n      onIndexChange={(index: number) =>\n        navigation.dispatch({\n          ...TabActions.jumpTo(state.routes[index].name),\n          target: state.key,\n        })\n      }\n      renderScene={({ route }) => descriptors[route.key].render()}\n      renderTouchable={\n        Platform.OS === 'web'\n          ? ({\n              onPress,\n              route,\n              accessibilityRole: _0,\n              borderless: _1,\n              centered: _2,\n              rippleColor: _3,\n              style,\n              ...rest\n            }) => {\n              return (\n                <Link\n                  {...rest}\n                  // @ts-expect-error: to could be undefined, but it doesn't affect functionality\n                  to={buildLink(route.name, route.params)}\n                  accessibilityRole=\"link\"\n                  onPress={(e: any) => {\n                    if (\n                      !(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) && // ignore clicks with modifier keys\n                      (e.button == null || e.button === 0) // ignore everything but left clicks\n                    ) {\n                      e.preventDefault();\n                      onPress?.(e);\n                    }\n                  }}\n                  style={[styles.touchable, style]}\n                />\n              );\n            }\n          : undefined\n      }\n      renderIcon={({ route, focused, color }) => {\n        const { options } = descriptors[route.key];\n\n        if (typeof options.tabBarIcon === 'string') {\n          return (\n            <MaterialCommunityIcons\n              name={options.tabBarIcon}\n              color={color}\n              size={24}\n              style={styles.icon}\n            />\n          );\n        }\n\n        if (typeof options.tabBarIcon === 'function') {\n          return options.tabBarIcon({ focused, color });\n        }\n\n        return null;\n      }}\n      getLabelText={({ route }: Scene) => {\n        const { options } = descriptors[route.key];\n\n        return options.tabBarLabel !== undefined\n          ? options.tabBarLabel\n          : options.title !== undefined\n          ? options.title\n          : (route as Route<string>).name;\n      }}\n      getColor={({ route }) => descriptors[route.key].options.tabBarColor}\n      getBadge={({ route }) => descriptors[route.key].options.tabBarBadge}\n      getAccessibilityLabel={({ route }) =>\n        descriptors[route.key].options.tabBarAccessibilityLabel\n      }\n      getTestID={({ route }) => descriptors[route.key].options.tabBarTestID}\n      onTabPress={({ route, preventDefault }) => {\n        const event = navigation.emit({\n          type: 'tabPress',\n          target: route.key,\n          canPreventDefault: true,\n        });\n\n        if (event.defaultPrevented) {\n          preventDefault();\n        }\n      }}\n    />\n  );\n}\n\nexport default function MaterialBottomTabView(props: Props) {\n  return (\n    <NavigationHelpersContext.Provider value={props.navigation}>\n      <MaterialBottomTabViewInner {...props} />\n    </NavigationHelpersContext.Provider>\n  );\n}\n\nconst styles = StyleSheet.create({\n  icon: {\n    backgroundColor: 'transparent',\n  },\n  touchable: {\n    display: 'flex',\n    justifyContent: 'center',\n  },\n});\n"]}